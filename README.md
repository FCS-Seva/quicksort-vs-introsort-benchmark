# Introsort: QUICK + HEAP + INSERTION

Экспериментальное исследование времени работы стандартной быстрой сортировки и гибридного алгоритма INTROSORT (QUICK+HEAP+INSERTION) на массивах разных типов.

## Постановка задачи

Реализованы две версии алгоритма сортировки:

- стандартный рекурсивный **QUICK SORT** со случайным выбором опорного элемента;
- гибридный алгоритм **INTROSORT** (QUICK+HEAP+INSERTION), который:
  - при достижении предельной глубины рекурсии `2 · log2(N)` переключается с QUICK SORT на HEAP SORT;
  - при размере текущего подмассива менее 16 элементов переключается с QUICK SORT на INSERTION SORT.

Экспериментально исследуется, как меняется время работы алгоритмов в зависимости от:

- **размера массива** `n` (от 500 до 100000 с шагом 100);
- **типа входных данных**:
  - `random` — случайный массив значений в диапазоне [0, 6000];
  - `reversed` — массив, отсортированный по невозрастанию;
  - `almost` — почти отсортированный массив (отсортированный по возрастанию с небольшим числом случайных обменов).

Для каждого набора параметров выполняется несколько прогонов, время усредняется и записывается в CSV.

## Структура репозитория

- `code/`
  - `main.cpp` — генерация тестовых массивов (`ArrayGenerator`),
    реализация стандартного QUICK SORT и гибридного INTROSORT,
    класс `SortTester`, который проводит замеры времени и выводит результаты в формате CSV.
- `data/`
  - `sort_results.csv` — результаты экспериментов:
    - `type` — тип массива (`random`, `reversed`, `almost`);
    - `n` — размер массива;
    - `algo` — алгоритм (`quick` или `intro`);
    - `time_ms` — среднее время сортировки в миллисекундах.
- `plots/`
  - `plots.ipynb` — построение графиков времени работы стандартного QUICK SORT и графиков времени работы гибридного INTROSORT для трёх типов массивов;

## Выводы по графикам

### Стандартный QUICK SORT

- Для всех трёх типов входных данных наблюдается рост времени работы, близкий к O(n · log n), что соответствует средней теоретической оценке быстрой сортировки при случайном выборе опорного элемента.
- На случайных массивах быстродействие ровное и предсказуемое; на обратно отсортированных и «почти» отсортированных массивах видно больше шумов, но существенных провалов до квадратичного роста в проведённых экспериментах не наблюдалось (за счёт рандомизации опорного элемента).
- Глубина рекурсии в худших подмассивах может быть заметной, но остаётся контролируемой; время работы при росте `n` стабильно возрастает, не показывая резких скачков.

### Гибридный INTROSORT (QUICK+HEAP+INSERTION)

- При небольших размерах подмассивов использование INSERTION SORT позволяет снизить накладные расходы на рекурсию, за счёт чего гибридный алгоритм обычно немного быстрее стандартного QUICK SORT на массивах малой и средней длины.
- Переключение на HEAP SORT при достижении глубины `2 · log2(N)` предотвращает худшие сценарии с очень глубоким рекурсивным деревом: время работы становится более стабильным, особенно на обратно отсортированных и специальных почти отсортированных массивах.
- На случайных массивах INTROSORT показывает время работы, сопоставимое или немного лучше, чем у стандартного QUICK SORT; на обратно отсортированных и «почти» отсортированных массивах гибридный алгоритм в целом демонстрирует более ровный и предсказуемый график.
- При больших значениях `n` кривые для QUICK SORT и INTROSORT становятся близкими: асимптотическая сложность O(n · log n) у обоих алгоритмов одинакова, а выигрыш INTROSORT в основном проявляется в сглаживании худших случаев и ускорении работы на малых подмассивах.

В целом, результаты экспериментов подтверждают, что гибридный алгоритм INTROSORT сочетает в себе практические преимущества QUICK SORT, HEAP SORT и INSERTION SORT: он сохраняет высокую среднюю скорость быстрой сортировки, снижает риск возникновения квадратичного худшего случая и ускоряет обработку коротких подмассивов без изменения асимптотики по сравнению со стандартным QUICK SORT.
